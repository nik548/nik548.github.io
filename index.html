<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>100 Reasons I Love You</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      font-family: Arial, sans-serif;
      background: #fff0f5;
      overflow: hidden;
      position: relative;
    }

    /* Background vines (immersive) */
    .vine {
      position: absolute;
      width: 120px;
      height: 100%;
      background: repeating-linear-gradient(to bottom, #3c7a4d 0 12px, transparent 12px 24px);
      opacity: 0.3;
      animation: sway 6s ease-in-out infinite;
      z-index: -1;
    }
    .vine.left {
      left: 0;
    }
    .vine.right {
      right: 0;
      animation-direction: reverse;
    }

    /* Flowers */
    .flower {
      position: absolute;
      width: 18px;
      height: 18px;
      background: #ffb6c1;
      border-radius: 50%;
      transform: scale(0);
      animation: bloom 1s forwards, sway 6s ease-in-out infinite;
      opacity: 0.8;
    }

    /* Random flower placements */
    .flower:nth-child(1) { top: 10%; left: 20px; animation-delay: 0.2s; }
    .flower:nth-child(2) { top: 30%; left: 40px; animation-delay: 0.4s; }
    .flower:nth-child(3) { top: 60%; left: 25px; animation-delay: 0.6s; }
    .flower:nth-child(4) { top: 80%; left: 50px; animation-delay: 0.8s; }
    .flower:nth-child(5) { top: 20%; right: 20px; animation-delay: 0.3s; }
    .flower:nth-child(6) { top: 50%; right: 40px; animation-delay: 0.5s; }
    .flower:nth-child(7) { top: 70%; right: 25px; animation-delay: 0.7s; }
    .flower:nth-child(8) { top: 90%; right: 45px; animation-delay: 0.9s; }

    /* Animations */
    @keyframes sway {
      0%, 100% { transform: translateX(0); }
      50% { transform: translateX(5px); }
    }
    @keyframes bloom {
      to { transform: scale(1); }
    }

    /* Fade-in for title/card */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Title */
    h1 {
      font-size: 24px;
      margin-bottom: 20px;
      color: #d6336c;
      text-align: center;
      opacity: 0;
      animation: fadeIn 1.2s ease forwards;
    }

    /* Card container */
    .card {
      width: 300px;
      height: 200px;
      perspective: 1000px;
      cursor: pointer;
      opacity: 0;
      animation: fadeIn 1.5s ease forwards;
      animation-delay: 0.5s;
    }

    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      text-align: center;
      transition: transform 0.8s;
      transform-style: preserve-3d;
    }

    .card.flipped .card-inner {
      transform: rotateY(180deg);
    }

    /* Card faces */
    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      font-size: 20px;
      padding: 20px;
    }

    .card-front {
      background: #ffccd5;
    }

    .card-back {
      background: #ffe4e1;
      transform: rotateY(180deg);
      position: relative;
      flex-direction: column;
      justify-content: flex-start;
      padding-bottom: 80px; /* space for animal */
    }

    /* Reason text */
    #reason-text {
      text-align: center;
      max-width: 240px;
      margin-top: 30px;
    }

    /* Animal container (bottom right) */
    .animal {
      position: absolute;
      bottom: 10px;
      right: 10px;
      width: 60px;
      height: 60px;
      display: flex;
      justify-content: center;
      align-items: center;
      animation: dance 1s infinite ease-in-out;
    }

    @keyframes dance {
      0%, 100% { transform: translateY(0) rotate(-5deg); }
      50% { transform: translateY(-5px) rotate(5deg); }
    }

    /* Base face */
    .animal::before {
      content: '';
      position: absolute;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: inherit;
    }

    /* Eyes */
    .animal::after {
      content: '';
      position: absolute;
      width: 8px;
      height: 8px;
      background: #000;
      border-radius: 50%;
      top: 20px;
      left: 15px;
      box-shadow: 20px 0 #000;
    }

    /* ---------- CAT ---------- */
    .animal.cat {
      background: #ffcccb;
    }
    .animal.cat .ear {
      position: absolute;
      width: 15px;
      height: 15px;
      background: #ffcccb;
      top: -10px;
      clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
    }
    .animal.cat .ear.left { left: 5px; }
    .animal.cat .ear.right { right: 5px; }
    .animal.cat .whiskers {
      position: absolute;
      width: 40px;
      height: 2px;
      background: transparent;
      bottom: 15px;
    }
    .animal.cat .whiskers::before,
    .animal.cat .whiskers::after {
      content: '';
      width: 40px;
      height: 2px;
      background: #000;
      position: absolute;
    }
    .animal.cat .whiskers::before { transform: rotate(10deg); }
    .animal.cat .whiskers::after { transform: rotate(-10deg); }

    /* ---------- BUNNY ---------- */
    .animal.bunny {
      background: #f4f4f4;
    }
    .animal.bunny .ear {
      position: absolute;
      width: 12px;
      height: 30px;
      background: #f4f4f4;
      top: -30px;
      border-radius: 50%;
    }
    .animal.bunny .ear.left { left: 10px; }
    .animal.bunny .ear.right { right: 10px; }
    .animal.bunny .blush {
      position: absolute;
      bottom: 10px;
      left: 8px;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: pink;
      box-shadow: 34px 0 pink;
    }

    /* ---------- BEAR ---------- */
    .animal.bear {
      background: #deb887;
    }
    .animal.bear .ear {
      position: absolute;
      width: 14px;
      height: 14px;
      background: #deb887;
      border-radius: 50%;
      top: -8px;
    }
    .animal.bear .ear.left { left: 8px; }
    .animal.bear .ear.right { right: 8px; }
    .animal.bear .nose {
      position: absolute;
      top: 30px;
      left: 26px;
      width: 10px;
      height: 8px;
      border-radius: 50%;
      background: #333;
    }

    /* Countdown timer */
    #countdown {
      position: fixed;
      bottom: 20px;
      font-size: 16px;
      color: #444;
      background: rgba(255,255,255,0.8);
      padding: 5px 10px;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <!-- Background vines and flowers -->
  <div class="vine left"></div>
  <div class="vine right"></div>
  <div class="flower"></div>
  <div class="flower"></div>
  <div class="flower"></div>
  <div class="flower"></div>
  <div class="flower"></div>
  <div class="flower"></div>
  <div class="flower"></div>
  <div class="flower"></div>

  <!-- Title -->
  <h1>100 Reasons I Love You</h1>

  <!-- Card -->
  <div class="card" id="card">
    <div class="card-inner">
      <div class="card-face card-front" id="card-front">Click here for today’s reason</div>
      <div class="card-face card-back" id="card-back">
        <div id="reason-text"></div>
        <div id="animal" class="animal"></div>
      </div>
    </div>
  </div>

  <!-- Countdown timer -->
  <div id="countdown"></div>

  <script>
    const reasons = [
      "You always make me laugh.",
      "You’re my biggest supporter.",
      "I love how you scrunch your nose when you smile.",
      "You make even ordinary days special.",
      "You believe in me when I doubt myself.",
      // ... add until 100
    ];

    // Shuffle reasons
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }
    let shuffledReasons = shuffle([...reasons]);
    let reasonIndex = 0;

    function getNextReason() {
      if (reasonIndex >= shuffledReasons.length) {
        shuffledReasons = shuffle([...reasons]);
        reasonIndex = 0;
      }
      return shuffledReasons[reasonIndex++];
    }

    // Daily reset logic
    function getNextResetTimeEST() {
      const now = new Date();
      const estOffset = -5 * 60; // EST = UTC-5
      const nowUtc = now.getTime() + now.getTimezoneOffset() * 60000;
      const nowEst = new Date(nowUtc + estOffset * 60000);

      const nextReset = new Date(nowEst);
      nextReset.setHours(7, 0, 0, 0); // 7 AM EST
      if (nowEst >= nextReset) nextReset.setDate(nextReset.getDate() + 1);

      // Convert nextReset back to local time
      const nextResetLocal = new Date(nextReset.getTime() - estOffset * 60000 - now.getTimezoneOffset() * 60000);
      return nextResetLocal;
    }

    function updateCountdown() {
      const now = new Date();
      const diff = nextReset - now;
      if (diff <= 0) location.reload();

      const hrs = String(Math.floor(diff / 3600000)).padStart(2, '0');
      const mins = String(Math.floor((diff % 3600000) / 60000)).padStart(2, '0');
      const secs = String(Math.floor((diff % 60000) / 1000)).padStart(2, '0');

      document.getElementById('countdown').textContent = `Countdown to next card: ${hrs}:${mins}:${secs}`;
    }

    // Animal logic
    const animals = ['cat', 'bunny', 'bear'];
    function getRandomAnimalClass() {
      return animals[Math.floor(Math.random() * animals.length)];
    }
    function updateBackContent() {
      document.getElementById('reason-text').textContent = todayReason;
      const animalDiv = document.getElementById('animal');
      const randomAnimal = getRandomAnimalClass();
      animalDiv.className = `animal ${randomAnimal}`;
      animalDiv.innerHTML = `
        <div class="ear left"></div>
        <div class="ear right"></div>
        ${randomAnimal === 'cat' ? '<div class="whiskers"></div>' : ''}
        ${randomAnimal === 'bunny' ? '<div class="blush"></div>' : ''}
        ${randomAnimal === 'bear' ? '<div class="nose"></div>' : ''}
      `;
    }

    // Determine today's reason (persistent until reset)
    const nextReset = getNextResetTimeEST();
    const storedReason = localStorage.getItem('todayReason');
    const storedExpiry = localStorage.getItem('todayReasonExpiry');
    let todayReason;

    if (storedReason && storedExpiry && new Date(storedExpiry) > new Date()) {
      todayReason = storedReason;
    } else {
      todayReason = getNextReason();
      localStorage.setItem('todayReason', todayReason);
      localStorage.setItem('todayReasonExpiry', nextReset);
    }

    // Initialize card content
    updateBackContent();

    const card = document.getElementById('card');
    card.addEventListener('click', () => {
      card.classList.toggle('flipped');
    });

    // Countdown updater
    setInterval(updateCountdown, 1000);
    updateCountdown();
  </script>
</body>
</html>
